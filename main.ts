enum ActionKind {
    RunningLeft,
    RunningRight,
    Idle,
    IdleLeft,
    IdleRight,
    JumpingLeft,
    JumpingRight,
    CrouchLeft,
    CrouchRight,
    Flying,
    Walking,
    Jumping,
    ShootLeft,
    ShootLeftRun,
    ShootRight,
    GunRotate,
    Idle2,
    ShootRightRun,
    JumpRightShoot,
    JumpLeftShoot,
    CrouchLeftShoot,
    CrouchRightShoot,
    EnemyLeft_1,
    EnemyRight_2,
    AnimationBomb,
    SwimRight,
    SwimLeft,
    BombExplosion,
    IdleShootLeft,
    IdleShootRight,
    ShootCrouchLeft,
    ShootCrouchRight
}
namespace SpriteKind {
    export const Bumper = SpriteKind.create()
    export const Goal = SpriteKind.create()
    export const Coin = SpriteKind.create()
    export const Flier = SpriteKind.create()
    export const Ast = SpriteKind.create()
    export const Gun = SpriteKind.create()
    export const Bomb = SpriteKind.create()
    export const Projectile2 = SpriteKind.create()
}
function animateCrouchShoot () {
    mainCrouchLeftShoot = animation.createAnimation(ActionKind.CrouchLeftShoot, 100)
    animation.attachAnimation(hero, mainCrouchLeftShoot)
    mainCrouchLeftShoot.addAnimationFrame(img`
        ............................
        ............................
        ............................
        ............................
        ..f.........ffff............
        .fdffffff.ffabbbff..........
        f1ddddddf.faabbbbf..........
        f5dcdcffffafabfbbbf.........
        .fdcdf1d1fafabfbbbf.........
        ..fffffd1fafabfbbbf.........
        ....fdfcdfaaaabbbbf.........
        .....ffffffaaaabbfff........
        .......fcdffaaaaffdf........
        .......fdd11ffffcd1f........
        .......ffffff..fffff........
        `)
    mainCrouchRightShoot = animation.createAnimation(ActionKind.CrouchRightShoot, 100)
    animation.attachAnimation(hero, mainCrouchRightShoot)
    mainCrouchRightShoot.addAnimationFrame(img`
        ............................
        ............................
        ............................
        ............................
        ............ffff.........f..
        ..........ffbbbaff.ffffffdf.
        ..........fbbbbaaf.fdddddd1f
        .........fbbbfbafaffffcdcd5f
        .........fbbbfbafaf1d1fdcdf.
        .........fbbbfbafaf1dffdff..
        .........fbbbbaaaafdcfdf....
        ........fffbbaaaaffffff.....
        ........fdffaaaaffdcf.......
        ........f1dcffff11ddf.......
        ........fffff..ffffff.......
        `)
}
sprites.onOverlap(SpriteKind.Projectile, SpriteKind.Bumper, function (sprite, otherSprite) {
	
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Bumper, function (sprite, otherSprite) {
    info.changeLifeBy(-1)
    pause(100)
})
function initializeAnimations () {
    initializeHeroAnimations()
    initializeCoinAnimation()
    initializeGunAnimation()
    initializeEnemyAnimation()
    initializeBombAnimation()
    initializeSwimAnimation()
}
function initializeBombAnimation () {
    BombAnimation = animation.createAnimation(ActionKind.AnimationBomb, 100)
    BombAnimation.addAnimationFrame(img`
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ................cdc................
        ...............ddddd...............
        ..............cd1dddc..............
        ..............2244222..............
        ..............cdddddc..............
        ...............ddddd...............
        ................cdc................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        `)
    BombAnimation.addAnimationFrame(img`
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ................cdc................
        ...............ddddd...............
        ..............cd1dddc..............
        ..............ffccfff..............
        ..............cdddddc..............
        ...............ddddd...............
        ................cdc................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        `)
    BombExplosion = animation.createAnimation(ActionKind.BombExplosion, 70)
    BombExplosion.addAnimationFrame(img`
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ................222................
        ...............24442...............
        ..............2411142..............
        ..............2414142..............
        ..............2411142..............
        ...............24442...............
        ................222................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        `)
    BombExplosion.addAnimationFrame(img`
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ..............2222222..............
        .............244444442.............
        ............24411111442............
        ............241.....142............
        ............241.....142............
        ............241.....142............
        ............241.....142............
        ............241.....142............
        ............24411111442............
        .............244444442.............
        ..............2222222..............
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        `)
    BombExplosion.addAnimationFrame(img`
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ..............2222222..............
        ............22444444422............
        ...........2441111111442...........
        ...........241.......142...........
        ..........241.........142..........
        ..........241.........142..........
        ..........241.........142..........
        ..........241.........142..........
        ..........241.........142..........
        ..........241.........142..........
        ..........241.........142..........
        ...........241.......142...........
        ...........2441111111442...........
        ............22444444422............
        ..............2222222..............
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        `)
    BombExplosion.addAnimationFrame(img`
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        .............222222222.............
        ...........2244444444422...........
        ..........244111111111442..........
        .........24411.......11442.........
        .........241...........142.........
        ........2411...........1142........
        ........241.............142........
        ........241.............142........
        ........241.............142........
        ........241.............142........
        ........241.............142........
        ........241.............142........
        ........241.............142........
        ........2411...........1142........
        .........241...........142.........
        .........24411.......11442.........
        ..........244111111111442..........
        ...........2244444444422...........
        .............222222222.............
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        `)
    BombExplosion.addAnimationFrame(img`
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        .............222222222.............
        ...........2244444444422...........
        ..........244111111111442..........
        .........2411.........1142.........
        ........241.............142........
        .......241...............142.......
        .......241...............142.......
        ......241.................142......
        ......241.................142......
        ......241.................142......
        ......241.................142......
        ......241.................142......
        ......241.................142......
        ......241.................142......
        ......241.................142......
        ......241.................142......
        .......241...............142.......
        .......241...............142.......
        ........241.............142........
        .........2411.........1142.........
        ..........244111111111442..........
        ...........2244444444422...........
        .............222222222.............
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        `)
    BombExplosion.addAnimationFrame(img`
        ...................................
        ...................................
        ...................................
        ...................................
        ............22222222222............
        ..........224444444444422..........
        .........24411111111111442.........
        ........24411.........11442........
        .......2411.............1142.......
        ......2411...............1142......
        .....2441.................1442.....
        .....241...................142.....
        ....2411...................1142....
        ....241.....................142....
        ....241.....................142....
        ....241.....................142....
        ....241.....................142....
        ....241.....................142....
        ....241.....................142....
        ....241.....................142....
        ....241.....................142....
        ....241.....................142....
        ....2411...................1142....
        .....241...................142.....
        .....2441.................1442.....
        ......2411...............1142......
        .......2411.............1142.......
        ........24411.........11442........
        .........24411111111111442.........
        ..........224444444444422..........
        ............22222222222............
        ...................................
        ...................................
        ...................................
        ...................................
        `)
    BombExplosion.addAnimationFrame(img`
        ...................................
        ...................................
        ............22222222222............
        ..........224444444444422..........
        ........2244111111111114422........
        .......24411...........11442.......
        ......2411...............1142......
        .....2411.................1142.....
        ....2411...................1142....
        ....241.....................142....
        ...241.......................142...
        ...241.......................142...
        ..241.........................142..
        ..241.........................142..
        ..241.........................142..
        ..241.........................142..
        ..241.........................142..
        ..241.........................142..
        ..241.........................142..
        ..241.........................142..
        ..241.........................142..
        ..241.........................142..
        ..241.........................142..
        ...241.......................142...
        ...241.......................142...
        ....241.....................142....
        ....2411...................1142....
        .....2411.................1142.....
        ......2411...............1142......
        .......24411...........11442.......
        ........2244111111111114422........
        ..........224444444444422..........
        ............22222222222............
        ...................................
        ...................................
        `)
    BombExplosion.addAnimationFrame(img`
        ............22222222222............
        .........22244444444444222.........
        ........2444111111111114442........
        ......224111...........111422......
        .....24411...............11442.....
        ....2441...................1442....
        ...2441.....................1442...
        ...241.......................142...
        ..241.........................142..
        .2411.........................1142.
        .241...........................142.
        .241...........................142.
        241.............................142
        241.............................142
        241.............................142
        241.............................142
        241.............................142
        241.............................142
        241.............................142
        241.............................142
        241.............................142
        241.............................142
        241.............................142
        .241...........................142.
        .241...........................142.
        .2411.........................1142.
        ..241.........................142..
        ...241.......................142...
        ...2441.....................1442...
        ....2441...................1442....
        .....24411...............11442.....
        ......224111...........111422......
        ........2444111111111114442........
        .........22244444444444222.........
        ............22222222222............
        `)
}
function giveIntroduction () {
    scene.setBackgroundImage(img`
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999aaaaaaaaaaaaa99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbbbbbbbbbba9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbbbbbbbbbbba999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbbbbbbbbbbba999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbbbbbbbbbbba999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbbbbbbbbbba9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbbbaaaaaaa99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbba999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbba999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbba999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbbbaaaaa9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbbbbbbbba99aaa99999aaa99999aaaaaaa999999aaaaaaa999999aaa99999aaa99999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbbbbbbbba9abbba999abbba999abbbbbbba9999abbbbbbba9999abbba999abbba9999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbbbbbbbba9abbba999abbba999abbbbbbbba999abbbbbbbba999abbba999abbba9999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbbbaaaaa99abbba999abbba999abbbaaabbba99abbbaaabbba99abbba999abbba9999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbba9999999abbba999abbba999abbba99abba99abbba99abba99abbba999abbba9999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbba9999999abbba999abbba999abbba99abba99abbba99abba99abbba999abbba9999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbba9999999abbba999abbba999abbbaaabbba99abbbaaabbba99abbba999abbba9999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbba9999999abbba999abbba999abbbbbbbba999abbbbbbbba999abbba999abbba9999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbba9999999abbbba9abbbba999abbbbbbba9999abbbbbbba9999abbbba9abbbba9999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbba9999999abbbbbabbbbba999abbbaabbba999abbbaabbba999abbbbbabbbbba9999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbba9999999abbbbbbbbbbba999abbba9abbba99abbba9abbba999abbbbbbbbbba9999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbba9999999abbbbbbbbbbbba99abbba99abbba9abbba99abbba999abbbbbbbba99999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999abbba999999999abbbbbbbbabba99abbba99abbba9abbba99abbba9999abbbbbba999999999999999999999999999999999999999999999999
        99999999999999999999999999999999999999999999999aaa99999999999aaaaaaaa9aa9999aaa9999aaa999aaa9999aaa999999abbbba9999999999999999999999999999999999999999999999999
        99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999abbbbba9999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaabbbbba99999999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbba999999999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbba9999999999999999999999999999999999999999999999999999
        999999999999999999999999999999999999999999999abbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbba99999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        `)
    game.setDialogFrame(img`
        . 2 2 2 2 2 2 2 2 2 2 2 2 2 . . 
        2 2 1 1 1 1 1 1 1 1 1 1 1 2 2 . 
        2 1 1 2 2 2 2 2 2 2 2 2 1 1 2 . 
        2 1 2 2 1 1 1 1 1 1 1 2 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 2 1 1 1 1 1 1 1 2 2 1 2 . 
        2 1 1 2 2 2 2 2 2 2 2 2 1 1 2 . 
        2 2 1 1 1 1 1 1 1 1 1 1 1 2 2 . 
        . 2 2 2 2 2 2 2 2 2 2 2 2 2 . . 
        . . . . . . . . . . . . . . . . 
        `)
    game.setDialogCursor(img`
        . 4 4 2 2 2 . 
        4 1 4 4 2 2 2 
        2 4 4 2 2 2 2 
        . 2 2 2 2 2 . 
        . . 2 2 2 . . 
        . . . 2 . . . 
        . . . . . . . 
        . . . . . . . 
        `)
    showInstruction("Move with the left and right buttons.")
    showInstruction("Crouch with the down button")
    showInstruction("Jump with the A button.")
    showInstruction("Hold A while jumping to do a higher jump.")
    showInstruction("Shoot with the B button.")
    showInstruction("Now try doing everything in this tutorial level!")
}
function initializeCoinAnimation () {
    coinAnimation = animation.createAnimation(ActionKind.Idle, 120)
    coinAnimation.addAnimationFrame(img`
        . 4 4 2 2 2 . 
        4 1 4 4 2 2 2 
        2 4 4 2 2 2 2 
        . 2 2 2 2 2 . 
        . . 2 2 2 . . 
        . . . 2 . . . 
        . . . . . . . 
        . . . . . . . 
        `)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . 
        . 4 4 2 2 2 . 
        4 1 4 4 2 2 2 
        2 4 4 2 2 2 2 
        . 2 2 2 2 2 . 
        . . 2 2 2 . . 
        . . . 2 . . . 
        . . . . . . . 
        `)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . 
        . . . . . . . 
        . 4 4 2 2 2 . 
        4 1 4 4 2 2 2 
        2 4 4 2 2 2 2 
        . 2 2 2 2 2 . 
        . . 2 2 2 . . 
        . . . 2 . . . 
        `)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . 
        . 4 4 2 2 2 . 
        4 1 4 4 2 2 2 
        2 4 4 2 2 2 2 
        . 2 2 2 2 2 . 
        . . 2 2 2 . . 
        . . . 2 . . . 
        . . . . . . . 
        `)
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Coin, function (sprite, otherSprite) {
    otherSprite.destroy(effects.trail, 100)
    otherSprite.y += -3
    info.changeScoreBy(1)
    music.baDing.play()
})
function AnimationShoot () {
    mainShootLeft = animation.createAnimation(ActionKind.ShootLeft, 100)
    animation.attachAnimation(hero, mainShootLeft)
    mainShootLeft.addAnimationFrame(img`
        ............ffff............
        ..f.......ffabbbff..........
        .fdffffff.faabbbbf..........
        f1ddddddffafabfbbbf.........
        f5cdcdffffafabfbbbf.........
        .fcdcf1d1fafabfbbbf.........
        ..fffffd1faaaabbbbf.........
        ....fdfcdffaaaabbf..........
        .....ffff.ffaaaaff..........
        ...........fffff............
        ............................
        ........ffff....fff.........
        .......fcdd1f..fcd1f........
        .......fccddf..fcddf........
        .......ffffff..fffff........
        `)
    mainShootRight = animation.createAnimation(ActionKind.ShootRight, 100)
    animation.attachAnimation(hero, mainShootRight)
    mainShootRight.addAnimationFrame(img`
        ............ffff............
        ..........ffbbbaff.......f..
        ..........fbbbbaaf.ffffffdf.
        .........fbbbfbafaffdddddd1f
        .........fbbbfbafaffffcdcd5f
        .........fbbbfbafaf1d1fdcdf.
        .........fbbbbaaaaf1dfffff..
        ..........fbbaaaaffdcfdf....
        ..........ffaaaaff.ffff.....
        ............ffff............
        ............................
        .........fff....ffff........
        ........f1dcf..f1ddcf.......
        ........fddcf..fddccf.......
        ........fffff..ffffff.......
        `)
    mainShootLeftRun = animation.createAnimation(ActionKind.ShootLeftRun, 100)
    animation.attachAnimation(hero, mainShootLeftRun)
    mainShootLeftRun.addAnimationFrame(img`
        ............ffff............
        ..f.......ffabbbff..........
        .fdffffff.faabbbbf..........
        f1ddddddffafabfbbbf.........
        f5cdcdffffafabfbbbf.........
        .fcdcf1d1fafabfbbbf.........
        ..fffffd1faaaabbbbf.........
        ....fdfcdffaaaabbf..........
        .....ffff.ffaaaaff..........
        ...........fffff............
        ................ffff........
        ........ffff...f11df........
        .......fcdd1f.fdd1df........
        .......fccddf.fcddf.........
        .......ffffff.ffff..........
        `)
    mainShootLeftRun.addAnimationFrame(img`
        ............ffff............
        ..f.......ffabbbff..........
        .fdffffff.faabbbbf..........
        f1ddddddffafabfbbbf.........
        f5cdcdffffafabfbbbf.........
        .fcdcf1d1fafabfbbbf.........
        ..fffffd1faaaabbbbf.........
        ....fdfcdffaaaabbf..........
        .....ffff.ffaaaaff..........
        ...........ffffff...........
        ...........fcdd1f...........
        ...........fccddf...........
        ..........fffffff...........
        ..........fcdd1f............
        ..........ffffff............
        `)
    mainShootLeftRun.addAnimationFrame(img`
        ............ffff............
        ..f.......ffabbbff..........
        .fdffffff.faabbbbf..........
        f1ddddddffafabfbbbf.........
        f5cdcdffffafabfbbbf.........
        .fcdcf1d1fafabfbbbf.........
        ..fffffd1faaaabbbbf.........
        ....fdfcdffaaaabbf..........
        .....ffff.ffaaaaff..........
        ...........fffff............
        ..........fcdd1f............
        ..........fccddf............
        ..........fffffff...........
        ...........fcdd1f...........
        ...........ffffff...........
        `)
    mainShootLeftRun.addAnimationFrame(img`
        ............ffff............
        ..f.......ffabbbff..........
        .fdffffff.faabbbbf..........
        f1ddddddffafabfbbbf.........
        f5cdcdffffafabfbbbf.........
        .fcdcf1d1fafabfbbbf.........
        ..fffffd1faaaabbbbf.........
        ....fdfcdffaaaabbf..........
        .....ffff.ffaaaaff..........
        ...........fffff............
        ........ffff................
        ........fcd1f..ffff.........
        ........fcdd1ffcdd1f........
        .........fcddffccddf........
        ..........ffffffffff........
        `)
    mainShootRightRun = animation.createAnimation(ActionKind.ShootRightRun, 100)
    animation.attachAnimation(hero, mainShootRightRun)
    mainShootRightRun.addAnimationFrame(img`
        ............ffff............
        ..........ffbbbaff.......f..
        ..........fbbbbaaf.ffffffdf.
        .........fbbbfbafaffdddddd1f
        .........fbbbfbafaffffcdcd5f
        .........fbbbfbafaf1d1fdcdf.
        .........fbbbbaaaaf1dfffff..
        ..........fbbaaaaffdcfdf....
        ..........ffaaaaff.ffff.....
        ............ffff............
        ........ffff................
        ........f11df..ffff.........
        ........fdddcff1ddcf........
        .........fcccffddccf........
        ..........ffffffffff........
        `)
    mainShootRightRun.addAnimationFrame(img`
        ............ffff............
        ..........ffbbbaff.......f..
        ..........fbbbbaaf.ffffffdf.
        .........fbbbfbafaffdddddd1f
        .........fbbbfbafaffffcdcd5f
        .........fbbbfbafaf1d1fdcdf.
        .........fbbbbaaaaf1dfffff..
        ..........fbbaaaaffdcfdf....
        ..........ffaaaaff.ffff.....
        ..........ffffff............
        ..........f1ddcf............
        ..........fddccfff..........
        ..........ffffff1cf.........
        .............f1ddcf.........
        .............ffffff.........
        `)
    mainShootRightRun.addAnimationFrame(img`
        ............ffff............
        ..........ffbbbaff.......f..
        ..........fbbbbaaf.ffffffdf.
        .........fbbbfbafaffdddddd1f
        .........fbbbfbafaffffcdcd5f
        .........fbbbfbafaf1d1fdcdf.
        .........fbbbbaaaaf1dfffff..
        ..........fbbaaaaffdcfdf....
        ..........ffaaaaff.ffff.....
        ............fffff...........
        ............f1ddcf..........
        ............fddccf..........
        ...........fffffff..........
        ...........f1ddcf...........
        ...........ffffff...........
        `)
    mainShootRightRun.addAnimationFrame(img`
        ............ffff............
        ..........ffbbbaff.......f..
        ..........fbbbbaaf.ffffffdf.
        .........fbbbfbafaffdddddd1f
        .........fbbbfbafaffffcdcd5f
        .........fbbbfbafaf1d1fdcdf.
        .........fbbbbaaaaf1dfffff..
        ..........fbbaaaaffdcfdf....
        ..........ffaaaaff.ffff.....
        ............ffff............
        ................ffff........
        ..........ffff.f1dcf........
        .........f1ddcfddccf........
        .........fddccfcccf.........
        .........fffffffff..........
        `)
}
function attemptJump () {
    // else if: either fell off a ledge, or double jumping
    if ((hero.isHittingTile(CollisionDirection.Bottom) || hero.vy < -20) && (!(controller.down.isPressed()) && !(hero.tileKindAt(TileDirection.Center, assets.tile`tile32`)))) {
        while (controller.A.isPressed() && JumpCounter <= 3) {
            hero.vy += -2.6 * pixelsToMeters
            pause(55)
            JumpCounter = 1 + JumpCounter
        }
    } else if (hero.tileKindAt(TileDirection.Center, assets.tile`tile32`)) {
        hero.vy = -50
        hero.ay = -11
    }
}
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    while (controller.B.isPressed() && !(hero.tileKindAt(TileDirection.Center, assets.tile`tile32`))) {
        if (controller.down.isPressed()) {
            if (heroFacingLeft) {
                projectile = sprites.createProjectileFromSprite(img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 5 5 5 5 5 . . . . . . 
                    . . . . 5 1 1 1 1 1 5 . . . . . 
                    . . . . . 5 5 5 5 5 . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `, hero, -200, 0)
                projectile.x += -10
                projectile.y += 0
                projectile.setKind(SpriteKind.Projectile2)
            } else {
                projectile = sprites.createProjectileFromSprite(img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 5 5 5 5 5 . . . . . . 
                    . . . . 5 1 1 1 1 1 5 . . . . . 
                    . . . . . 5 5 5 5 5 . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `, hero, 200, 0)
                projectile.x += 11
                projectile.y += 0
                projectile.setKind(SpriteKind.Projectile2)
            }
        } else {
            if (heroFacingLeft) {
                projectile = sprites.createProjectileFromSprite(img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 5 5 5 5 5 . . . . . . 
                    . . . . 5 1 1 1 1 1 5 . . . . . 
                    . . . . . 5 5 5 5 5 . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `, hero, -200, 0)
                projectile.x += -10
                projectile.y += -3
                projectile.setKind(SpriteKind.Projectile2)
            } else {
                projectile = sprites.createProjectileFromSprite(img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 5 5 5 5 5 . . . . . . 
                    . . . . 5 1 1 1 1 1 5 . . . . . 
                    . . . . . 5 5 5 5 5 . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `, hero, 200, 0)
                projectile.x += 11
                projectile.y += -3
                projectile.setKind(SpriteKind.Projectile2)
            }
        }
        music.pewPew.play()
        pause(300)
    }
})
function animateIdle () {
    mainIdleLeft = animation.createAnimation(ActionKind.IdleLeft, 100)
    animation.attachAnimation(hero, mainIdleLeft)
    mainIdleLeft.addAnimationFrame(img`
        ............ffff............
        ..........ffabbbff..........
        ..........faabbbbf..........
        .........fafabfbbbf.........
        .........fafabfbbbf.........
        .........fafabfbbfff........
        ........ffaaaabbfd1df.......
        ........f1faaaabf111f.......
        ........fcdfaaaafd1df.......
        .........fffffff.fff........
        ............................
        ........ffff....fff.........
        .......fcdd1f..fcd1f........
        .......fccddf..fcddf........
        .......ffffff..fffff........
        `)
    mainIdleRight = animation.createAnimation(ActionKind.IdleRight, 100)
    animation.attachAnimation(hero, mainIdleRight)
    mainIdleRight.addAnimationFrame(img`
        ............ffff............
        ..........ffbbbaff..........
        ..........fbbbbaaf..........
        .........fbbbfbafaf.........
        .........fbbbfbafaf.........
        ........fffbbfbafaf.........
        .......fd1dfbbaaaaff........
        .......f111fbaaaaf1f........
        .......fd1dfaaaafdcf........
        ........fff.fffffff.........
        ............................
        .........fff....ffff........
        ........f1dcf..f1ddcf.......
        ........fddcf..fddccf.......
        ........fffff..ffffff.......
        `)
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (hero.isHittingTile(CollisionDirection.Bottom)) {
        JumpCounter = 0
    }
    attemptJump()
})
function animateRun () {
    mainRunLeft = animation.createAnimation(ActionKind.RunningLeft, 100)
    animation.attachAnimation(hero, mainRunLeft)
    mainRunLeft.addAnimationFrame(img`
        ............ffff............
        ..........ffabbbff..........
        ..........faabbbbf..........
        .........fafabfbbbf.........
        .........fafabfbbbf.........
        .........fafabfbbfff........
        ........ffaaaabbfd1df.......
        ........f1faaaabf111f.......
        ........fcdfaaaafd1df.......
        .........fffffff.fff........
        ................ffff........
        ........ffff...f11df........
        .......fcdd1f.fdd1df........
        .......fccddf.fcddf.........
        .......ffffff.ffff..........
        `)
    mainRunLeft.addAnimationFrame(img`
        ............ffff............
        ..........ffabbbff..........
        ..........faabbbbf..........
        .........fafabfbbbf.........
        .........fafabfbbbf.........
        .........fafabfffbf.........
        .........faaafd1df..........
        ..........faaf111f..........
        ..........ffafd1df..........
        ...........ffffff...........
        ...........fcdd1f...........
        ...........fccddf...........
        ..........fffffff...........
        ..........fcdd1f............
        ..........ffffff............
        `)
    mainRunLeft.addAnimationFrame(img`
        ............ffff............
        ..........ffabbbff..........
        ..........faabbbbf..........
        .........fafabfbbbf.........
        .........fafabfbbbf.........
        .........fafabfffff.........
        .........faaaafd1df.........
        ..........faaaf111f.........
        ..........ffaafd1df.........
        ...........fffffff..........
        ..........fcdd1f............
        ..........fccddf............
        ..........fffffff...........
        ...........fcdd1f...........
        ...........ffffff...........
        `)
    mainRunLeft.addAnimationFrame(img`
        ............ffff............
        ..........ffabbbff..........
        ..........faabbbbf..........
        .........fafabfbbbf.........
        .........fafabfbbbf.........
        ........ffafabfbbfff........
        ........ffaaaabbfd1df.......
        ........f1faaaabf111f.......
        ........fcdfaaaafd1df.......
        .........fffffff.fff........
        .........ffff...............
        .........fcd1f.ffff.........
        .........fcdd1fcdd1f........
        ..........fcddfccddf........
        ...........fffffffff........
        `)
    mainRunRight = animation.createAnimation(ActionKind.RunningRight, 100)
    animation.attachAnimation(hero, mainRunRight)
    mainRunRight.addAnimationFrame(img`
        ............ffff............
        ..........ffbbbaff..........
        ..........fbbbbaaf..........
        .........fbbbfbafaf.........
        .........fbbbfbafaf.........
        ........fffbbfbafaf.........
        .......fd1dfbbaaaaff........
        .......f111fbaaaafdf........
        .......fd1dfaaaafdcf........
        ........fff.fffffff.........
        ........ffff................
        ........f11df..ffff.........
        ........fdddcff1ddcf........
        .........fcccffddccf........
        ..........ffffffffff........
        `)
    mainRunRight.addAnimationFrame(img`
        ............ffff............
        ..........ffbbbaff..........
        ..........fbbbbaaf..........
        .........fbbbfbafaf.........
        .........fbbbfbafaf.........
        .........fffffbafaf.........
        .........fd1dfaaaaf.........
        .........f111faaaf..........
        .........fd1dfaaff..........
        ..........ffffff............
        ..........f1ddcf............
        ..........fddccfff..........
        ..........ffffff1cf.........
        .............f1ddcf.........
        .............ffffff.........
        `)
    mainRunRight.addAnimationFrame(img`
        ............ffff............
        ..........ffbbbaff..........
        ..........fbbbbaaf..........
        .........fbbbfbafaf.........
        .........fbbbfbafaf.........
        .........fffffbafaf.........
        .........fd1dfaaaaf.........
        .........f111faaaf..........
        .........fd1dfaaff..........
        ..........fffffff...........
        ............f1ddcf..........
        ............fddccf..........
        ...........fffffff..........
        ...........f1ddcf...........
        ...........ffffff...........
        `)
    mainRunRight.addAnimationFrame(img`
        ............ffff............
        ..........ffbbbaff..........
        ..........fbbbbaaf..........
        .........fbbbfbafaf.........
        .........fbbbfbafaf.........
        ........fffbbfbafaf.........
        .......fd1dfbbaaaaff........
        .......f111fbaaaafdf........
        .......fd1dfaaaafdcf........
        ........fff.fffffff.........
        ................ffff........
        ..........ffff.f1dcf........
        .........f1ddcfddccf........
        .........fddccfcccf.........
        .........fffffffff..........
        `)
}
function initializeScene () {
    scene.setBackgroundImage(img`
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999995555559999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999555555666665555599999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999555666666666666666655999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999555666666666666666666666555999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999555666666777777777777766666665599999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999955666666777777777777777777666666559999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999556666677777777777777777777766666655999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999566666777777777777777777777777666665599999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999995666667777777777777777777777777776666659999
        9999999999999999999999999999999999999555555555559999999999999999999999999999999999999999999999999999999999999999999955666777777777777777777777777777777666665999
        9999999999999999999999999999999955555666666666665555999999999999999999999999999999999999999999999999999999999999999966666777777777777777777777777777777766665999
        9999999999999999999999999999995566666666666666666666599999999999999999999999999999999999999999999999999999999999999566667777777777777777777777777777777776666599
        9999999999999999999999999995556666666666666666666666655559999999999999999999999999999999999999999999999999999999995666677777777777777777777777777777777777666659
        9999999999999999999999999556666666666667777777766666666665999999999999999999999999999999999999999999999999999999995666777777777777777777777777777777777777766665
        9999999999999999999999955666666666777777777777777777666666559999999999999999999999999999999999999999999999999999956667777777777777777777777777777777777777776666
        9999999999999999999999566666666777777777777777777777777666665599999999999999999999999999999999999999999999999955566677777777777777777777777777777777777777777666
        9999999999999999999995666666777777777777777777777777777776666655999999999999999999999999999999999999999999999566666677777777777777777777777777777777777777777766
        9999999999999999999956666677777777777777777777777777777777666665559999999999999999999999999999999999999999955666666777777777777777777777777777777777777777777776
        9999999999999999999566677777777777777777777777777777777777776666655999999999999999999999999999999999999955566666677777777777777777777777777777777777777777777777
        9999999999999999995666777777777777777777777777777777777777777666665599999999999999999999999999999999999556666667777777777777777777777777777777777777777777777777
        9999999999999999956666777777777777777777777777777777777777777776666659999999999999555555555599999999995566666677777777777777777777777777777777777777777777777777
        9999999999999999956666777777777777777777777777777777777777777777666659999999995555556666555555599555555666677777777777777777777777777777777777777777777777777777
        9999999999999999566667777777777777777777777777777777777777777777766665599999955666666666666666595566665666677777777777777777777777777777777777777777777777777777
        9999999999999995666677777777777777777777777777777777777777777777777666599999566666666666666666655566665666677777777777777777777777777777777777777777777777777777
        9999999999999956666677777777777777777777777777777777777777777777777666655995666666777777777666666556656666777777777777777777777777777777777777777777777777777777
        9999999999995566666777777777777777777777777777777777777777777777777776666556666777777777777776666655566667777777777777777755555555557777777777777777777777777777
        9999999999956666777777777777777777777777777777777777777777777777777777666566667777777777777777766666655567777777777777777555566666655555577777777777777777777777
        9999999955566667777777777777777777777777777777777777777777777777777777665666777777777777777777777766666557777777777777775566666666666666557777777777777777777777
        9999995556666777777777777777777777777777777777777777777777777777777777756667777777777777777777777776666655777777777777556666666666666666665557777777777777777777
        9999555566667777777777777777777777777777777777777777777777777777777777566677777777777777777777777777766665557777777775566666667666666666666655577777777777777777
        9955556666667777777777777777777777777777777777777777777777777777777755666777777777777777777777777777777666655777777755666667777777666666666666655577777777777777
        9555566667777777777777777777777777777777777777777777777777777777777566667777777777777777777777777777777766666557777556666677777777776666666666666557777777777777
        5556666777777777777777777777777777777777777777777777777777777777775666677777777777777777777777777777777776666657555566666777777777777766666666666655777777777777
        5566667777777777777777777777777777777777777777777777777777777777756666777777777777777777777777777777777777766655555666667777777777777776666666666665577777777777
        5666777777777777777777777777777777777777777777777777777777777777566667777777777777777777777777777777777777755555666666677777777777777777776666666666557777777777
        6667777777777777777777777777777777777777777777777777777777777775666677777777777777777777777777777777777777755566666666777777777777777777777766666666655777777777
        6667777777777777777777777777777777777777777777777777777777777556667777777777777777777777777777777777777755556666666677777777777777777777777777666666665577777777
        6677777777777777777777777777777777777777777777777777777777775666677777777777777777777777777777777777777556666666667777777777777777777777777777766666666557777777
        6777777777777777777777777775555555555555557777777777777777756666677777777777777777777777777777777777775566666667777777777777777777777777777777777766666655577777
        7777777777777777777777755555556666666666655555777777777777566667777777777777777777777777777777777777755666666777777777777777777777777777777777777777666666657777
        7777777777777777777777555566666666666666666665577777777775666677777777777777777777777777777777777777556666677777777777777777777777777777777777777777766666665777
        7777777777777777777755556666666666666666666666655577777755666777777777777777777777777777777777777775666667777777777777777777777777777777777777777777776666665577
        7777777777777777775555666666666777777777666666666555777556666777777777777777777777777777777777777555666677777777777777777777777777777777777777777777777666666577
        7777777777777777755666666677777777777777777766666655557556677777777777777777777777777777777777775566667777777777777777777777777777777777777777777777777666666557
        7777777777777777556666666777777777777777777777766666655556777777777777777777777777777777777777755666677777777777777777777777777777777777777777777777777766666655
        7777777777777775666666777777777777777777777777776666666655777777777777777777777777777777777777556666677777777777777777777777777777777777777777777777777776666665
        7777777777777755666677777777777777777777777777777666666665557777777777777777777777777777777777566667777777777777777777777777777777777777777777777777777777666665
        7777777777777556666777777777777777777777777777777776666666655777777777777777777777777777777775666677777777777777777777777777777777777777777777777777777777666666
        7777777777777566667777777777777777777777777777777777666666665577777777777777777777777777777755666677777777777777777777777777777777777777777777777777777777776666
        7777777777775666667777777777777777777777777777777777766666666577777777777777777777777777777556666777777777777777777777777777777777777777777777777777777777777766
        7777777777756666677777777777777777777777777777777777777766666657777777777777777777777777775566667777777777777777777777777777777777777777777777777777777777777777
        7777777775566667777777777777777777777777777777777777777776666665577777777777777777777777755666677777777777777777777777777777777777777777777777777777777777777777
        7777777556666667777777777777777777777777777777777777777777666666557777777777777777777777756666777777777777777777777777777777777777777777777777777777777777777777
        7777775566666677777777777777777777777777777777777777777777776666655777777777777777777777556666777777777777777777777777777777777777777777777777777777777777777777
        7777755666667777777777777777777777777777777777777777777777777766665577777777777777777775566667777777777777777777777777777777777777777777777777777777777777777777
        7777556666677777777777777777777777777777777777777777777777777766666557777777777777777755666677777777777777777777777777777777777777777777777777777777777777777777
        7777566666777777777777777777777777777777777777777777777777777776666655577777777777777556666777777777777777777777777777777777777777777777777777777777777777777777
        7755666667777777777777777777777777777777777777777777777777777777666666555777777777755566667777777777777777777777777777777777777777777777777777777777777777777777
        7566666677777777777777777777777777777777777777777777777777777777776666666555777777556666677777777777777777777777777777777777777777777777777777777777777777777777
        5566666777777777777777777777777777777777777777777777777777777777777666666665577775566666777777777777777777777777777777777777777777777777777777777777777777777777
        6666667777777777777777777777777777777777777777777777777777777777777776666666655755666667777777777777777777777777777777777777777777777777777777777777777777777777
        6666677777777777777777777777777777777777777777777777777777777777777777766666665556666677777777777777777777777777777777777777777777777777777777777777777777777777
        6667777777777777777777777777777777777777777777777777777777777777777777777666666655567777777777777777777777777777777777777777777777777777777777777777777777777777
        6677777777777777777777777777777777777777777777777777777777777777777777777776666665557777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777776666655777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777766655577777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777766665557777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777776666555777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777766655777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777766666577777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777766666557777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777776666655777777777777777777777777777777777777777777777777777777777777777555555
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777666665577777777777777777777777777777777777777777777777777777777777555566666
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777766666557777777777777777777777777777777777777777777777777777777555666666666
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777776666655577777777777777777777777777777777777777777777777777755566666666666
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777666666557777777777777777777777777777777777777777777777775566666666667777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777776666655777777777777777777777777777777777777777777777755666666677777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777666665777777777777777777777777777777777777777777777556666677777777777
        7777777777777777777777777777777777777777777777777777777555555555555577777777777777777777777776666577777777777777777777777777777777777777777775566667777777777777
        5557777777777777777777777777777777777777777777777777755566666666666555777777777777777777777776666557777777777777777777777777777777777777777556666667777777777777
        6665777777777777777777777777777777777777777777777777556666666666666665557777777777777777777777666657777777777777777777777777777777777777775566666777777777777777
        6666557777777777777777777777777777777777777777777775566666777777766666655577777777777777777777666665777777777777777777777777777777777777755666666777777777777777
        6666655777777777777777777777777777777777777777777755666667777777777666666655777777777777777777766665777777777777777777777777777777777777556666677777777777777777
        7666665577777777777777777777777777777777777777775556666677777777777766666665557777777777777777766665577777777777777777777777777777777775566666777777777777777777
        7776666557777777777777777777777777777777777777755666666777777777777777666666655777777777777777776666577777777777777777777777777777775556666667777777777777777777
        7777666655777777777777777777777777777777777775566666667777777777777777776666665777777777777777776666577777777777777777777777777777555666666677777777777777777777
        7777766665577777777777777777777777777777777555666666677777777777777777777666666557777777777777777666557777777777777777777777777555566666667777777777777777777777
        7777776666577777777777777777777777777777755666666667777777777777777777777776666655777777777777777666655777777777777777777775555666666666777777777777777777777777
        7777777666657777777777777777777777777775556666667777777777777777777777777777666665557777777777777766665577777777777777555555666666666777777777777777777777777777
        7777777666657777777777777777777777777555666666677777777777777777777777777777766666655777777777777766666555555555555555566666666666777777777777777777777777777777
        7777777766655777777777777777777777755566666667777777777777777777777777777777777666665577777777777777666666666666666666666666666777777777777777777777777777777777
        7777777766665777777777777777777775556666667777777777777777777777777777777777777766666557777777777777666666666666666666666667777777777777777777777777777777777777
        7777777766665577777777777777777555666666777777777777777777777777777777777777777776666655777777777777776666666666677777777777777777777777777777777777777777777777
        7777777776666557777777777777775566666677777777777777777777777777777777777777777777666665557777777777777777777777777777777777777777777777777777777777777777777777
        7777777776666665577777777777756666667777777777777777777777777777777777777777777777766666655555777777777777777777777777777777777777777777777777777777777777777777
        7777777777666666555777777777566666677777777777777777777777777777777777777777777777776666666665577777777777777777777777777777777777777777777777777777777777777775
        7777777777766666665577777755666667777777777777777777777777777777777777777777777777777766666666557777777777777777777777777777777777777777777777777777777777775555
        7777777777776666666655575556666677777777777777777777777777777777777777777777777777777777766666557777777777777777777777777777777777777777777777777777777777556666
        7777777777777766666666555666667777777777777777777777777777777777777777777777777777777777776666655777777777777777777777777777777777777777777777777777777555566666
        7777777777777777666666665556677777777777777777777777777777777777777777777777777777777777777666665777777777777777777777777777777777777777777777777777775566666677
        7777777777777777776666666655777777777777777777777777777777777777777777777777777777777777777766665577777777777777777777777777777777777777777777777777556666667777
        7777777777777777777766666665577777777777777777777777777777777777777777777777777777777777777776666577777777777777777777777777777777777777777777777755566666777777
        7777777777777777777777766666657777777777777777777777777777777777777777777777777777777777777776666577777777777777777777777777777777777777777777777556666677777777
        7777777777777777777777776666655577777777777777777777777777777777777777777777777777777777777777666557777777777777777777777777777777777777777777555666666777777777
        7777777777777777777777777666666557777777777777777777777777777777777777777777777777777777777777666657777777777777777777777777777777777777777755566666677777777777
        7777777777777777777777777766666665777777777777777777777777777777777777777777777777777777777777666655777777777777777777777777777777777777777756666667777777777777
        7777777777777777777777777777666665577777777777777777777777777777777777777777777777777777777777766665777777777777777777777777777777777777777566666777777777777777
        7777777777777777777777777777776666557777777777777777777777777777777777777777777777777777777777766665777777777777777777777777777777777777775566667777777777777777
        7777777777777777777777777777777666655777777777777777777777777777777777777777777777777777777777776665577777777777777777777777777777777777775666677777777777777777
        7777777777777777777777777777777766665777777777777777777777777777777777777777777777777777777777776666577777777777777777777777777777777777775666677777777777777777
        7777777777777777777777777777777776665577777777777777777777777777777777777777777777777777777777777666577777777777777777777777777777777777775666777777777777777777
        7777777777777777777777777777777776666557777777777777777777777777777777777777777777777777777777777666577777777777777777777777777777777777775667777777777777777777
        7777777777777777777777777777777777666657777777777777777777777777777777777777777777777777777777777666557777777777777777777777777777777777775667777777777777777777
        7777777777777777777777777777777777666657777777777777777777777777777777777777777777777777777777777766657777777777777777777777777777777777775667777777777777777777
        ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
        ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
        ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
        `)
    if (currentLevel == 0) {
        tiles.setTilemap(tilemap`level7`)
    } else if (currentLevel == 1) {
        tiles.setTilemap(tilemap`level4`)
    } else if (currentLevel == 2) {
        tiles.setTilemap(tilemap`level5`)
    } else if (currentLevel == 3) {
        tiles.setTilemap(tilemap`level3`)
    } else {
        game.showLongText("Thank you for playing this bug fix version of Furry. I would also love it if you checked out my other games.", DialogLayout.Bottom)
    }
}
function animateJumps () {
    // Because there isn't currently an easy way to say "play this animation a single time and stop at the end", this just adds a bunch of the same frame at the end to accomplish the same behavior
    mainJumpLeft = animation.createAnimation(ActionKind.JumpingLeft, 150)
    animation.attachAnimation(hero, mainJumpLeft)
    mainJumpLeft.addAnimationFrame(img`
        ............ffff............
        ..........ffabbbff..........
        ..........faabbbbf..........
        .........fafabfbbbf.........
        .......fffafabfbbbffff......
        ......fc1fafabfbbbfcd1f.....
        ......fd1faaaabbbbfd1df.....
        ......fcdcfaaaabbffcdcf.....
        .......fffffaaaaff.fff......
        ............ffff............
        ...............fff..........
        ...........ffffcd1f.........
        ..........fcd1fcddf.........
        ..........fcddfcccf.........
        ..........fcccffccf.........
        ...........fccf.fff.........
        ............fff.............
        `)
    mainJumpLeft.addAnimationFrame(img`
        ............ffff............
        ..........ffabbbff..........
        .......ffffaabbbbf.fff......
        ......fc1fafabfbbbfcd1f.....
        ......fd1fafabfbbbfd1df.....
        ......fcdfafabfbbbfcdcf.....
        .......fffaaaabbbbffff......
        ..........faaaabbff.........
        ..........ffaaaaff..........
        ............ffff............
        ...............fff..........
        ...........ffffcd1f.........
        ..........fcd1fcddf.........
        ..........fcddfcccf.........
        ..........fcccffccf.........
        ...........fccf.fff.........
        ............fff.............
        `)
    mainJumpRight = animation.createAnimation(ActionKind.JumpingRight, 150)
    animation.attachAnimation(hero, mainJumpRight)
    mainJumpRight.addAnimationFrame(img`
        ............ffff............
        ..........ffbbbaff..........
        ..........fbbbbaaf..........
        ......ffffbbbfbafafff.......
        .....f1dcfbbbfbafaf1cf......
        .....fd1dfbbbfbafaf1df......
        .....fcdcfbbbbaaaafdcf......
        ......fff.fbbaaaaffff.......
        ..........ffaaaaff..........
        ............ffff............
        ..........fff...............
        .........f1dcffff...........
        .........fddcf1dcf..........
        .........fcccfddcf..........
        .........fccffcccf..........
        .........fff.fccf...........
        .............fff............
        `)
    mainJumpRight.addAnimationFrame(img`
        ............ffff............
        ..........ffbbbaff..........
        ......fff.fbbbbaaffff.......
        .....f1dcfbbbfbafaf1cf......
        .....fd1dfbbbfbafaf1df......
        .....fcdcfbbbfbafafdcf......
        ......ffffbbbbaaaafff.......
        ..........fbbaaaaf..........
        ..........ffaaaaff..........
        ............ffff............
        ..........fff...............
        .........f1dcffff...........
        .........fddcf1dcf..........
        .........fcccfddcf..........
        .........fccffcccf..........
        .........fff.fccf...........
        .............fff............
        `)
}
function animateCrouch () {
    mainCrouchLeft = animation.createAnimation(ActionKind.CrouchLeft, 100)
    animation.attachAnimation(hero, mainCrouchLeft)
    mainCrouchLeft.addAnimationFrame(img`
        ............................
        ............................
        ............................
        ............................
        ............ffff............
        ..........ffabbbff..........
        ..........faabbbbf..........
        .......fffafabfbbbffff......
        ......fc1fafabfbbbfcd1f.....
        ......fd1fafabfbbbfdddf.....
        ......fcdfaaaabbbbfcdcf.....
        .......ffffaaaabbfffff......
        .......fcdffaaaaffdf........
        .......fdd11ffffcd1f........
        .......ffffff..fffff........
        `)
    mainCrouchRight = animation.createAnimation(ActionKind.CrouchRight, 100)
    animation.attachAnimation(hero, mainCrouchRight)
    mainCrouchRight.addAnimationFrame(img`
        ............................
        ............................
        ............................
        ............................
        ............ffff............
        ..........ffbbbaff..........
        ..........fbbbbaaf..........
        ......ffffbbbfbafafff.......
        .....f1dcfbbbfbafaf1cf......
        .....fdddfbbbfbafaf1df......
        .....fcdcfbbbbaaaafdcf......
        ......fffffbbaaaaffff.......
        ........fdffaaaaffdcf.......
        ........f1dcffff11ddf.......
        ........fffff..ffffff.......
        `)
}
function clearGame () {
    for (let value4 of sprites.allOfKind(SpriteKind.Bumper)) {
        value4.destroy()
    }
    for (let value5 of sprites.allOfKind(SpriteKind.Coin)) {
        value5.destroy()
    }
    for (let value6 of sprites.allOfKind(SpriteKind.Goal)) {
        value6.destroy()
    }
    for (let value13 of sprites.allOfKind(SpriteKind.Bomb)) {
        value13.destroy()
    }
    for (let value8 of sprites.allOfKind(SpriteKind.Enemy)) {
        value8.destroy()
    }
}
scene.onOverlapTile(SpriteKind.Player, assets.tile`tile37`, function (sprite, location) {
    info.changeLifeBy(-1)
    hero.vy = -150
})
sprites.onOverlap(SpriteKind.Bumper, SpriteKind.Projectile2, function (sprite, otherSprite) {
    otherSprite.destroy()
    sprite.destroy()
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Projectile, function (sprite, otherSprite) {
    info.changeLifeBy(-1)
    pause(100)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Bomb, function (sprite, otherSprite) {
    animation.attachAnimation(otherSprite, BombExplosion)
    animation.setAction(otherSprite, ActionKind.BombExplosion)
    otherSprite.vy = 0
    otherSprite.ay = 0
    info.changeLifeBy(-1)
    pause(400)
    otherSprite.destroy()
})
function createEnemies () {
    // enemy that moves back and forth
    for (let value of tiles.getTilesByType(assets.tile`tile24`)) {
        bumper = sprites.create(img`
            ............ffff............
            ..f.......ffcdddff..........
            .fdffffff.fccddddf..........
            f1ddddddffcffffdddf.........
            f2cdcdffffcfcdfdddf.........
            .fcdcf1d1fcfcdfdddf.........
            ..fffffd1fccccddddf.........
            ....fdfcdffccccddf..........
            .....ffff.ffccccff..........
            ...........fffff............
            ................ffff........
            ........ffff...f11df........
            .......fcdd1f.fdd1df........
            .......fccddf.fcddf.........
            .......ffffff.ffff..........
            `, SpriteKind.Bumper)
        tiles.placeOnTile(bumper, value)
        tiles.setTileAt(value, assets.tile`tile38`)
        animation.attachAnimation(bumper, EnemyRight_1)
        animation.attachAnimation(bumper, EnemyLeft_1)
        animation.attachAnimation(bumper, idleShootRight)
        animation.attachAnimation(bumper, idleShootLeft)
        animation.attachAnimation(bumper, EnemyCrouchLeft)
        animation.attachAnimation(bumper, EnemyCrouchRight)
        bumper.ay = gravity
        bumper.z = 0
    }
}
info.onLifeZero(function () {
    info.setLife(3)
    initializeLevel(1)
})
function initializeSwimAnimation () {
    mainSwimLeft = animation.createAnimation(ActionKind.SwimLeft, 100)
    animation.attachAnimation(hero, mainSwimLeft)
    mainSwimLeft.addAnimationFrame(img`
        ...........ffff.............
        .........ffcaaaff...........
        .........fccaaaaf...........
        ........fcfcafaaaf..........
        ........fcfcafaaaf..........
        ........fcfcafaaaf.fff......
        ........fccccaaaaffcdcf.....
        .....fff.fccccaaf.fdddf.....
        ....fcdcfffccccff.fcdcf.....
        ....fdddf..ffff....fff......
        ....fcdcf.......fff.........
        .....fff..fff..fcddf........
        .........fcddf.fccdf........
        .........fccdf.fcccf........
        .........fcccf..fccf........
        ..........fccf...fff........
        ...........fff..............
        ............................
        `)
    mainSwimLeft.addAnimationFrame(img`
        ...........ffff.............
        .........ffcaaaff...........
        .........fccaaaaf...........
        ........fcfcafaaaf..........
        ........fcfcafaaaf.fff......
        .....ffffcfcafaaaffcdcf.....
        ....fcdcfccccaaaaffdddf.....
        ....fdddffccccaaf.fcdcf.....
        ....fcdcfffccccff..fff......
        .....fff...ffff.............
        .................fff........
        .........fff....fcddf.......
        ........fcddf...fccdf.......
        ........fccdf...fcccf.......
        ........fcccf....fccf.......
        .........fccf.....fff.......
        ..........fff...............
        ............................
        `)
    mainSwimLeft.addAnimationFrame(img`
        ...........ffff.............
        .........ffcaaaff...........
        .........fccaaaafffff.......
        .....ffffcfcafaaafcdcf......
        ....fcdcfcfcafaaafdddf......
        ....fdddfcfcafaaafcdcf......
        ....fcdcfccccaaaaffff.......
        .....fff.fccccaaf...........
        .........ffccccff...........
        ...........ffff.............
        ................fff.........
        ..........fff..fcddf........
        .........fcddf.fccdf........
        .........fccdf.fcccf........
        .........fcccf..fccf........
        ..........fccf...fff........
        ...........fff..............
        ............................
        `)
    mainSwimLeft.addAnimationFrame(img`
        ...........ffff.............
        .........ffcaaaff.fff.......
        .....fff.fccaaaaffcdcf......
        ....fcdcfcfcafaaafdddf......
        ....fdddfcfcafaaafcdcf......
        ....fcdcfcfcafaaaffff.......
        .....ffffccccaaaaf..........
        .........fccccaaf...........
        .........ffccccff...........
        ...........ffff.............
        ................fff.........
        ..........fff..fcddf........
        .........fcddf.fccdf........
        .........fccdf.fcccf........
        .........fcccf..fccf........
        ..........fccf...fff........
        ...........fff..............
        ............................
        `)
    mainSwimLeft.addAnimationFrame(img`
        ...........ffff.............
        .........ffcaaaff...........
        .........fccaaaafffff.......
        .....ffffcfcafaaafcdcf......
        ....fcdcfcfcafaaafdddf......
        ....fdddfcfcafaaafcdcf......
        ....fcdcfccccaaaaffff.......
        .....fff.fccccaaf...........
        .........ffccccff...........
        ...........ffff.............
        ................fff.........
        ..........fff..fcddf........
        .........fcddf.fccdf........
        .........fccdf.fcccf........
        .........fcccf..fccf........
        ..........fccf...fff........
        ...........fff..............
        ............................
        `)
    mainSwimLeft.addAnimationFrame(img`
        ...........ffff.............
        .........ffcaaaff...........
        .........fccaaaaf...........
        ........fcfcafaaaf..........
        ........fcfcafaaaf.fff......
        .....ffffcfcafaaaffcdcf.....
        ....fcdcfccccaaaaffdddf.....
        ....fdddffccccaaf.fcdcf.....
        ....fcdcfffccccff..fff......
        .....fff...ffff.............
        .................fff........
        .........fff....fcddf.......
        ........fcddf...fccdf.......
        ........fccdf...fcccf.......
        ........fcccf....fccf.......
        .........fccf.....fff.......
        ..........fff...............
        ............................
        `)
    mainSwimRight = animation.createAnimation(ActionKind.SwimRight, 100)
    animation.attachAnimation(hero, mainSwimRight)
    mainSwimRight.addAnimationFrame(img`
        ...........ffff.............
        .........ffaaacff...........
        .........faaaaccf...........
        ........faaafacfcf..........
        ........faaafacfcf..........
        ....fff.faaafacfcf..........
        ...fcdcffaaaaccccf..........
        ...fdddf.faaccccf.fff.......
        ...fcdcf.ffccccfffcdcf......
        ....fff....ffff..fdddf......
        .......fff.......fcdcf......
        ......fcddf..fff..fff.......
        ......fccdf.fcddf...........
        ......fcccf.fccdf...........
        ......fccf..fcccf...........
        ......fff...fccf............
        ............fff.............
        ............................
        `)
    mainSwimRight.addAnimationFrame(img`
        ...........ffff.............
        .........ffaaacff...........
        .........faaaaccf...........
        ........faaafacfcf..........
        ....fff.faaafacfcf..........
        ...fcdcffaaafacfcf..........
        ...fdddffaaaaccccffff.......
        ...fcdcf.faaccccffcdcf......
        ....fff..ffccccfffdddf......
        ...........ffff..fcdcf......
        ......fff.........fff.......
        .....fcddf...ffff...........
        .....fccdf...fcddf..........
        .....fcccf...fccdf..........
        .....fccf....fcccf..........
        .....fff.....fccf...........
        .............fff............
        ............................
        `)
    mainSwimRight.addAnimationFrame(img`
        ...........ffff.............
        .........ffaaacff...........
        .........faaaaccf...........
        .....ffffaaafacfcffff.......
        ....fcdcfaaafacfcfcdcf......
        ....fdddfaaafacfcfdddf......
        ....fcdcfaaaaccccfcdcf......
        .....fff.faaccccf.fff.......
        .........ffccccff...........
        ...........ffff.............
        .......fff..................
        ......fcddf.ffff............
        ......fccdf.fcddf...........
        ......fcccf.fccdf...........
        ......fccf..fcccf...........
        ......fff...fccf............
        ............fff.............
        ............................
        `)
    mainSwimRight.addAnimationFrame(img`
        ...........ffff.............
        .........ffaaacff...........
        .....fff.faaaaccf.fff.......
        ....fcdcfaaafacfcfcdcf......
        ....fdddfaaafacfcfdddf......
        ....fcdcfaaafacfcfcdcf......
        .....ffffaaaaccccffff.......
        .........faaccccf...........
        .........ffccccff...........
        ...........ffff.............
        .......fff..................
        ......fcddf.ffff............
        ......fccdf.fcddf...........
        ......fcccf.fccdf...........
        ......fccf..fcccf...........
        ......fff...fccf............
        ............fff.............
        ............................
        `)
    mainSwimRight.addAnimationFrame(img`
        ...........ffff.............
        .........ffaaacff...........
        .........faaaaccf...........
        .....ffffaaafacfcffff.......
        ....fcdcfaaafacfcfcdcf......
        ....fdddfaaafacfcfdddf......
        ....fcdcfaaaaccccfcdcf......
        .....fff.faaccccf.fff.......
        .........ffccccff...........
        ...........ffff.............
        .......fff..................
        ......fcddf.ffff............
        ......fccdf.fcddf...........
        ......fcccf.fccdf...........
        ......fccf..fcccf...........
        ......fff...fccf............
        ............fff.............
        ............................
        `)
    mainSwimRight.addAnimationFrame(img`
        ...........ffff.............
        .........ffaaacff...........
        .........faaaaccf...........
        ........faaafacfcf..........
        ....fff.faaafacfcf..........
        ...fcdcffaaafacfcf..........
        ...fdddffaaaaccccffff.......
        ...fcdcf.faaccccffcdcf......
        ....fff..ffccccfffdddf......
        ...........ffff..fcdcf......
        ......fff.........fff.......
        .....fcddf...ffff...........
        .....fccdf...fcddf..........
        .....fcccf...fccdf..........
        .....fccf....fcccf..........
        .....fff.....fccf...........
        .............fff............
        ............................
        `)
}
function showInstruction (text: string) {
    game.showLongText(text, DialogLayout.Bottom)
}
function animateJumpsShoot () {
    // Because there isn't currently an easy way to say "play this animation a single time and stop at the end", this just adds a bunch of the same frame at the end to accomplish the same behavior
    mainJumpLeftShoot = animation.createAnimation(ActionKind.JumpLeftShoot, 150)
    animation.attachAnimation(hero, mainJumpLeftShoot)
    mainJumpLeftShoot.addAnimationFrame(img`
        ............ffff............
        ..f.......ffabbbff..........
        .fdffffff.faabbbbf..........
        f1ddddddffafabfbbbf.........
        f5cdcdffffafabfbbbf.........
        .fcdcf1d1fafabfbbbf.........
        ..fffffd1faaaabbbbf.........
        ....fcfcdffaaaabbff.........
        .....ffff..faaaaff..........
        ............ffff............
        ...............fff..........
        ...........ffffcd1f.........
        ..........fcd1fcddf.........
        ..........fcddfcccf.........
        ..........fcccffccf.........
        ...........fccf.fff.........
        ............fff.............
        `)
    mainJumpLeftShoot.addAnimationFrame(img`
        ............ffff............
        ..f.......ffabbbff..........
        .fdffffff.faabbbbf..........
        f1ddddddffafabfbbbf.........
        f5cdcdffffafabfbbbf.........
        .fcdcf1d1fafabfbbbf.........
        ..fffffd1faaaabbbbf.........
        ....fcfcdffaaaabbff.........
        .....ffff..faaaaff..........
        ............ffff............
        ...............fff..........
        ...........ffffcd1f.........
        ..........fcd1fcddf.........
        ..........fcddfcccf.........
        ..........fcccffccf.........
        ...........fccf.fff.........
        ............fff.............
        `)
    mainJumpRightShoot = animation.createAnimation(ActionKind.JumpRightShoot, 150)
    animation.attachAnimation(hero, mainJumpRightShoot)
    mainJumpRightShoot.addAnimationFrame(img`
        ............ffff............
        ..........ffbbbaff.......f..
        ..........fbbbbaaf.ffffffdf.
        .........fbbbfbafaffdddddd1f
        .........fbbbfbafaffffdcdc5f
        .........fbbbfbafaf1d1fcdcf.
        .........fbbbbaaaaf1dfffff..
        ..........fbbaaaaffdcfcf....
        ..........ffaaaaff.ffff.....
        ............ffff............
        ..........fff...............
        .........f1dcffff...........
        .........fddcf1dcf..........
        .........fcccfddcf..........
        .........fccffcccf..........
        .........fff.fccf...........
        .............fff............
        `)
    mainJumpRightShoot.addAnimationFrame(img`
        ............ffff............
        ..........ffbbbaff.......f..
        ..........fbbbbaaf.ffffffdf.
        .........fbbbfbafaffdddddd1f
        .........fbbbfbafaffffdcdc5f
        .........fbbbfbafaf1d1fcdcf.
        .........fbbbbaaaaf1dfffff..
        ..........fbbaaaaffdcfcf....
        ..........ffaaaaff.ffff.....
        ............ffff............
        ..........fff...............
        .........f1dcffff...........
        .........fddcf1dcf..........
        .........fcccfddcf..........
        .........fccffcccf..........
        .........fff.fccf...........
        .............fff............
        `)
}
function initializeHeroAnimations () {
    animateRun()
    animateIdle()
    animateCrouch()
    AnimationShoot()
    animateJumpsShoot()
    animateJumps()
    animateCrouchShoot()
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Goal, function (sprite, otherSprite) {
    info.changeLifeBy(1)
    if (info.life() >= 3) {
        info.setLife(3)
    }
    currentLevel += 1
    if (currentLevel < 3) {
        initializeLevel(1)
        game.splash("Next level unlocked!")
    } else {
        game.over(true, effects.confetti)
    }
})
function createPlayer (player2: Sprite) {
    scene.cameraFollowSprite(player2)
    player2.z = 5
    info.setLife(3)
    info.setScore(500)
    hero.ay = gravity
}
function spawnBomb () {
    for (let value11 of tiles.getTilesByType(assets.tile`tile22`)) {
        Bomb = sprites.create(img`
            . . c d c . . 
            . d d d d d . 
            c d 1 d d d c 
            2 2 4 4 2 2 2 
            c d d d d d c 
            . d d d d d . 
            . . c d c . . 
            `, SpriteKind.Bomb)
        tiles.placeOnTile(Bomb, value11)
        tiles.setTileAt(value11, assets.tile`tile9`)
        animation.attachAnimation(Bomb, BombAnimation)
        animation.setAction(Bomb, ActionKind.AnimationBomb)
        Bomb.ay = gravity
    }
}
function initializeLevel (level: number) {
    clearGame()
    initializeScene()
    for (let Wert of tiles.getTilesByType(assets.tile`tile33`)) {
        tiles.placeOnRandomTile(hero, assets.tile`tile33`)
    }
    createEnemies()
    spawnBomb()
    spawnGoals()
}
function spawnGoals () {
    for (let value6 of tiles.getTilesByType(assets.tile`tile1`)) {
        otherSprite = sprites.create(img`
            . 9 9 8 8 8 . 
            9 1 9 8 8 8 8 
            9 9 1 9 8 8 8 
            9 9 9 9 8 8 8 
            . 9 9 8 8 8 . 
            . . 9 8 8 . . 
            . . . 8 . . . 
            . . . . . . . 
            `, SpriteKind.Goal)
        tiles.placeOnTile(otherSprite, value6)
    }
    for (let value3 of tiles.getTilesByType(assets.tile`tile5`)) {
        coin = sprites.create(img`
            . 4 4 2 2 2 . 
            4 1 4 4 2 2 2 
            2 4 4 2 2 2 2 
            . 2 2 2 2 2 . 
            . . 2 2 2 . . 
            . . . 2 . . . 
            . . . . . . . 
            . . . . . . . 
            `, SpriteKind.Coin)
        tiles.placeOnTile(coin, value3)
        tiles.setTileAt(value3, assets.tile`tile0`)
        animation.attachAnimation(coin, coinAnimation)
        animation.setAction(coin, ActionKind.Idle)
    }
    for (let value10 of tiles.getTilesByType(assets.tile`tile6`)) {
        Gun2 = sprites.create(img`
            . . . f f f f . . . 
            . . . f d d d f . . 
            . f f f f c c d f . 
            . f d d d d d d 1 f 
            f d d c d c d c 5 f 
            f d d c d c d c f . 
            f d c f f f d f . . 
            f f f . . f c f . . 
            . . . . . . f f . . 
            . . . . . . . . . . 
            `, SpriteKind.Gun)
        tiles.placeOnTile(Gun2, value10)
        tiles.setTileAt(value10, assets.tile`tile0`)
        animation.attachAnimation(Gun2, WeaponAnimation)
        animation.setAction(Gun2, ActionKind.Idle2)
    }
}
function initializeGunAnimation () {
    WeaponAnimation = animation.createAnimation(ActionKind.Idle2, 100)
    WeaponAnimation.addAnimationFrame(img`
        . . . f f f f . . . 
        . . . f d d d f . . 
        . f f f f c c d f . 
        . f d d d d d d 1 f 
        f d d c d c d c 5 f 
        f d d c d c d c f . 
        f d c f f f d f . . 
        f f f . . f c f . . 
        . . . . . . f f . . 
        . . . . . . . . . . 
        `)
    WeaponAnimation.addAnimationFrame(img`
        . . . . f f f . . . 
        . . . . f d d f . . 
        . . . f f c c f . . 
        . . . f d d 1 5 f . 
        . . f c d c 5 5 f . 
        . . f c c c c c f . 
        . . f f c c d f . . 
        . . f f f c c f . . 
        . . . . . f f f . . 
        . . . . . . . . . . 
        `)
    WeaponAnimation.addAnimationFrame(img`
        . . . f f f . . . . 
        . . . f d d f . . . 
        . . . f c c f . . . 
        . . . f 1 5 f . . . 
        . . . f 5 5 f . . . 
        . . . f c c f . . . 
        . . . f c d f . . . 
        . . . f c c f . . . 
        . . . f f f f . . . 
        . . . . . . . . . . 
        `)
    WeaponAnimation.addAnimationFrame(img`
        . . . f f f . . . . 
        . . f d d f . . . . 
        . . f c c f f . . . 
        . f 5 1 d d f . . . 
        . f 5 5 c d c f . . 
        . f c c c c c f . . 
        . . f d c c f f . . 
        . . f c c f f f . . 
        . . f f f . . . . . 
        . . . . . . . . . . 
        `)
    WeaponAnimation.addAnimationFrame(img`
        . . . f f f f . . . 
        . . f d d d f . . . 
        . f d c c f f f f . 
        f 1 d d d d d d f . 
        f 5 c d c d c d d f 
        . f c d c d c d d f 
        . . f d f f f c d f 
        . . f c f . . f f f 
        . . f f . . . . . . 
        . . . . . . . . . . 
        `)
    WeaponAnimation.addAnimationFrame(img`
        . . . f f f . . . . 
        . . f d d f . . . . 
        . f f c c f . . . . 
        . f d d d d f . . . 
        . f d c d c c f . . 
        . . f c c c c f . . 
        . . f f f d c f . . 
        . . f d c f f f . . 
        . . f f f f . . . . 
        . . . . . . . . . . 
        `)
    WeaponAnimation.addAnimationFrame(img`
        . . . . f f f . . . 
        . . . f d d f . . . 
        . . . f c c f . . . 
        . . . f d d f . . . 
        . . . f d d f . . . 
        . . . f c c f . . . 
        . . . f c d f . . . 
        . . . f c c f . . . 
        . . . f f f f . . . 
        . . . . . . . . . . 
        `)
    WeaponAnimation.addAnimationFrame(img`
        . . . . f f f . . . 
        . . . . f d d f . . 
        . . . . f c c f f . 
        . . . f d d d d f . 
        . . f c c d c d f . 
        . . f c c c c f . . 
        . . f c d f f f . . 
        . . f f f c d f . . 
        . . . . f f f f . . 
        . . . . . . . . . . 
        `)
}
function initializeEnemyAnimation () {
    EnemyRight_1 = animation.createAnimation(ActionKind.EnemyRight_2, 100)
    EnemyRight_1.addAnimationFrame(img`
        ............ffff............
        ..........ffdddcff.......f..
        ..........fddddccf.ffffffdf.
        .........fdddffffcffdddddd1f
        .........fdddfdcfcffffcdcd2f
        .........fdddfdcfcf1d1fdcdf.
        .........fddddccccf1dfffff..
        ..........fddccccffdcfdf....
        ..........ffccccff.ffff.....
        ............ffff............
        ........ffff................
        ........f11df..ffff.........
        ........fdddcff1ddcf........
        .........fcccffddccf........
        ..........ffffffffff........
        `)
    EnemyRight_1.addAnimationFrame(img`
        ............ffff............
        ..........ffdddcff.......f..
        ..........fddddccf.ffffffdf.
        .........fdddffffcffdddddd1f
        .........fdddfdcfcffffcdcd2f
        .........fdddfdcfcf1d1fdcdf.
        .........fddddccccf1dfffff..
        ..........fddccccffdcfdf....
        ..........ffccccff.ffff.....
        ..........ffffff............
        ..........f1ddcf............
        ..........fddccfff..........
        ..........ffffff1cf.........
        .............f1ddcf.........
        .............ffffff.........
        `)
    EnemyRight_1.addAnimationFrame(img`
        ............ffff............
        ..........ffdddcff.......f..
        ..........fddddccf.ffffffdf.
        .........fdddffffcffdddddd1f
        .........fdddfdcfcffffcdcd2f
        .........fdddfdcfcf1d1fdcdf.
        .........fddddccccf1dfffff..
        ..........fddccccffdcfdf....
        ..........ffccccff.ffff.....
        ............fffff...........
        ............f1ddcf..........
        ............fddccf..........
        ...........fffffff..........
        ...........f1ddcf...........
        ...........ffffff...........
        `)
    EnemyRight_1.addAnimationFrame(img`
        ............ffff............
        ..........ffdddcff.......f..
        ..........fddddccf.ffffffdf.
        .........fdddffffcffdddddd1f
        .........fdddfdcfcffffcdcd2f
        .........fdddfdcfcf1d1fdcdf.
        .........fddddccccf1dfffff..
        ..........fddccccffdcfdf....
        ..........ffccccff.ffff.....
        ............ffff............
        ................ffff........
        ..........ffff.f1dcf........
        .........f1ddcfddccf........
        .........fddccfcccf.........
        .........fffffffff..........
        `)
    EnemyLeft_1 = animation.createAnimation(ActionKind.EnemyLeft_1, 100)
    EnemyLeft_1.addAnimationFrame(img`
        ............ffff............
        ..f.......ffcdddff..........
        .fdffffff.fccddddf..........
        f1ddddddffcffffdddf.........
        f2cdcdffffcfcdfdddf.........
        .fcdcf1d1fcfcdfdddf.........
        ..fffffd1fccccddddf.........
        ....fdfcdffccccddf..........
        .....ffff.ffccccff..........
        ...........fffff............
        ................ffff........
        ........ffff...f11df........
        .......fcdd1f.fdd1df........
        .......fccddf.fcddf.........
        .......ffffff.ffff..........
        `)
    EnemyLeft_1.addAnimationFrame(img`
        ............ffff............
        ..f.......ffcdddff..........
        .fdffffff.fccddddf..........
        f1ddddddffcffffdddf.........
        f2cdcdffffcfcdfdddf.........
        .fcdcf1d1fcfcdfdddf.........
        ..fffffd1fccccddddf.........
        ....fdfcdffccccddf..........
        .....ffff.ffccccff..........
        ...........ffffff...........
        ...........fcdd1f...........
        ...........fccddf...........
        ..........fffffff...........
        ..........fcdd1f............
        ..........ffffff............
        `)
    EnemyLeft_1.addAnimationFrame(img`
        ............ffff............
        ..f.......ffcdddff..........
        .fdffffff.fccddddf..........
        f1ddddddffcffffdddf.........
        f2cdcdffffcfcdfdddf.........
        .fcdcf1d1fcfcdfdddf.........
        ..fffffd1fccccddddf.........
        ....fdfcdffccccddf..........
        .....ffff.ffccccff..........
        ...........fffff............
        ..........fcdd1f............
        ..........fccddf............
        ..........fffffff...........
        ...........fcdd1f...........
        ...........ffffff...........
        `)
    EnemyLeft_1.addAnimationFrame(img`
        ............ffff............
        ..f.......ffcdddff..........
        .fdffffff.fccddddf..........
        f1ddddddffcffffdddf.........
        f2cdcdffffcfcdfdddf.........
        .fcdcf1d1fcfcdfdddf.........
        ..fffffd1fccccddddf.........
        ....fdfcdffccccddf..........
        .....ffff.ffccccff..........
        ...........fffff............
        ........ffff................
        ........fcd1f..ffff.........
        ........fcdd1ffcdd1f........
        .........fcddffccddf........
        ..........ffffffffff........
        `)
    idleShootLeft = animation.createAnimation(ActionKind.IdleShootLeft, 100)
    idleShootLeft.addAnimationFrame(img`
        ............ffff............
        ..f.......ffcdddff..........
        .fdffffff.fccddddf..........
        f1ddddddffcffffdddf.........
        f2cdcdffffcfcdfdddf.........
        .fcdcf1d1fcfcdfdddf.........
        ..fffffd1fccccddddf.........
        ....fdfcdffccccddf..........
        .....ffff.ffccccff..........
        ...........fffff............
        ............................
        ........ffff....fff.........
        .......fcdd1f..fcd1f........
        .......fccddf..fcddf........
        .......ffffff..fffff........
        `)
    idleShootRight = animation.createAnimation(ActionKind.IdleShootRight, 100)
    idleShootRight.addAnimationFrame(img`
        ............ffff............
        ..........ffdddcff.......f..
        ..........fddddccf.ffffffdf.
        .........fdddffffcffdddddd1f
        .........fdddfdcfcffffcdcd2f
        .........fdddfdcfcf1d1fdcdf.
        .........fddddccccf1dfffff..
        ..........fddccccffdcfdf....
        ..........ffccccff.ffff.....
        ............ffff............
        ............................
        .........fff....ffff........
        ........f1dcf..f1ddcf.......
        ........fddcf..fddccf.......
        ........fffff..ffffff.......
        `)
    EnemyCrouchLeft = animation.createAnimation(ActionKind.ShootCrouchLeft, 100)
    EnemyCrouchLeft.addAnimationFrame(img`
        ............................
        ............................
        ............................
        ............................
        ..f.........ffff............
        .fdffffff.ffcdddff..........
        f1ddddddf.fccddddf..........
        f2dcdcffffcffffdddf.........
        .fdcdf1d1fcfcdfdddf.........
        ..fffffd1fcfcdfdddf.........
        ....fdfcdfccccddddf.........
        .....ffffffccccddfff........
        .......fcdffccccffdf........
        .......fdd11ffffcd1f........
        .......ffffff..fffff........
        `)
    EnemyCrouchRight = animation.createAnimation(ActionKind.ShootCrouchRight, 100)
    EnemyCrouchRight.addAnimationFrame(img`
        ............................
        ............................
        ............................
        ............................
        ............ffff.........f..
        ..........ffdddcff.ffffffdf.
        ..........fddddccf.fdddddd1f
        .........fdddffffcffffcdcd2f
        .........fdddfdcfcf1d1fdcdf.
        .........fdddfdcfcf1dffdff..
        .........fddddccccfdcfdf....
        ........fffddccccffffff.....
        ........fdffccccffdcf.......
        ........f1dcffff11ddf.......
        ........fffff..ffffff.......
        `)
}
let EnemyCrouch = 0
let projectileEnemy: Sprite = null
let WeaponAnimation: animation.Animation = null
let Gun2: Sprite = null
let otherSprite: Sprite = null
let Bomb: Sprite = null
let mainJumpRightShoot: animation.Animation = null
let mainJumpLeftShoot: animation.Animation = null
let mainSwimRight: animation.Animation = null
let mainSwimLeft: animation.Animation = null
let EnemyCrouchRight: animation.Animation = null
let EnemyCrouchLeft: animation.Animation = null
let idleShootLeft: animation.Animation = null
let idleShootRight: animation.Animation = null
let EnemyLeft_1: animation.Animation = null
let EnemyRight_1: animation.Animation = null
let bumper: Sprite = null
let mainCrouchRight: animation.Animation = null
let mainCrouchLeft: animation.Animation = null
let mainJumpRight: animation.Animation = null
let mainJumpLeft: animation.Animation = null
let currentLevel = 0
let mainRunRight: animation.Animation = null
let mainRunLeft: animation.Animation = null
let mainIdleRight: animation.Animation = null
let mainIdleLeft: animation.Animation = null
let projectile: Sprite = null
let heroFacingLeft = false
let mainShootRightRun: animation.Animation = null
let mainShootLeftRun: animation.Animation = null
let mainShootRight: animation.Animation = null
let mainShootLeft: animation.Animation = null
let coinAnimation: animation.Animation = null
let BombExplosion: animation.Animation = null
let BombAnimation: animation.Animation = null
let mainCrouchRightShoot: animation.Animation = null
let mainCrouchLeftShoot: animation.Animation = null
let JumpCounter = 0
let coin: Sprite = null
let gravity = 0
let pixelsToMeters = 0
let hero: Sprite = null
hero = sprites.create(img`
    ............ffff............
    ..........ffbbbaff..........
    ..........fbbbbaaf..........
    .........fbbbfbafaf.........
    .........fbbbfbafaf.........
    ........fffbbfbafaf.........
    .......fd1dfbbaaaaff........
    .......f111fbaaaaf1f........
    .......fd1dfaaaafdcf........
    ........fff.fffffff.........
    ............................
    ........ffffff..ffff........
    .......f1ddfcf.f1ddcf.......
    .......fddcfcf.fddccf.......
    .......fffffff.ffffff.......
    `, SpriteKind.Player)
// how long to pause between each contact with a single enemy
let invincibilityPeriod = 600
pixelsToMeters = 30
gravity = 20 * pixelsToMeters
initializeAnimations()
animation.setAction(hero, ActionKind.ShootRightRun)
giveIntroduction()
initializeLevel(1)
createPlayer(hero)
let EnemyLeft_Right = 1
coin = sprites.create(img`
    . 4 4 2 2 2 . 
    4 1 4 4 2 2 2 
    2 4 4 2 2 2 2 
    . 2 2 2 2 2 . 
    . . 2 2 2 . . 
    . . . 2 . . . 
    . . . . . . . 
    . . . . . . . 
    `, SpriteKind.Coin)
let EnemyLife = 3
JumpCounter = 0
// Bomb movement
game.onUpdate(function () {
    for (let value12 of sprites.allOfKind(SpriteKind.Bomb)) {
        if (value12.isHittingTile(CollisionDirection.Top)) {
            value12.vy = 1 * gravity
            animation.setAction(value12, ActionKind.AnimationBomb)
        } else if (value12.isHittingTile(CollisionDirection.Bottom)) {
            value12.vy = -0.35 * gravity
            animation.setAction(value12, ActionKind.AnimationBomb)
        }
    }
})
// set up hero animations
game.onUpdate(function () {
    if (hero.vx < 0) {
        heroFacingLeft = true
    } else if (hero.vx > 0) {
        heroFacingLeft = false
    }
    if (hero.isHittingTile(CollisionDirection.Top)) {
    	
    }
    if (hero.tileKindAt(TileDirection.Center, assets.tile`tile32`) || hero.tileKindAt(TileDirection.Bottom, assets.tile`tile32`) || hero.tileKindAt(TileDirection.Top, assets.tile`tile32`) && (hero.tileKindAt(TileDirection.Bottom, assets.tile`tile21`) || (hero.tileKindAt(TileDirection.Bottom, assets.tile`tile14`) || hero.tileKindAt(TileDirection.Bottom, assets.tile`tile13`)))) {
        if (heroFacingLeft) {
            animation.setAction(hero, ActionKind.SwimLeft)
        } else {
            animation.setAction(hero, ActionKind.SwimRight)
        }
    } else {
        if (controller.B.isPressed()) {
            if (controller.down.isPressed() && hero.isHittingTile(CollisionDirection.Bottom)) {
                if (heroFacingLeft) {
                    animation.setAction(hero, ActionKind.CrouchLeftShoot)
                } else {
                    animation.setAction(hero, ActionKind.CrouchRightShoot)
                }
            } else if ((hero.vy < 5 || hero.vy > 1) && !(hero.isHittingTile(CollisionDirection.Bottom))) {
                if (heroFacingLeft) {
                    animation.setAction(hero, ActionKind.JumpLeftShoot)
                } else {
                    animation.setAction(hero, ActionKind.JumpRightShoot)
                }
            } else if (hero.vx < 0) {
                animation.setAction(hero, ActionKind.ShootLeftRun)
            } else if (hero.vx > 0) {
                animation.setAction(hero, ActionKind.ShootRightRun)
            } else {
                if (heroFacingLeft) {
                    animation.setAction(hero, ActionKind.ShootLeft)
                } else {
                    animation.setAction(hero, ActionKind.ShootRight)
                }
            }
        } else {
            if (controller.down.isPressed() && hero.isHittingTile(CollisionDirection.Bottom)) {
                if (heroFacingLeft) {
                    animation.setAction(hero, ActionKind.CrouchLeft)
                } else {
                    animation.setAction(hero, ActionKind.CrouchRight)
                }
            } else if ((hero.vy > 5 || hero.vy < 0) && !(hero.isHittingTile(CollisionDirection.Bottom))) {
                if (heroFacingLeft) {
                    animation.setAction(hero, ActionKind.JumpingLeft)
                } else {
                    animation.setAction(hero, ActionKind.JumpingRight)
                }
            } else if (hero.vx < 0) {
                animation.setAction(hero, ActionKind.RunningLeft)
            } else if (hero.vx > 0) {
                animation.setAction(hero, ActionKind.RunningRight)
            } else {
                if (heroFacingLeft) {
                    animation.setAction(hero, ActionKind.IdleLeft)
                } else {
                    animation.setAction(hero, ActionKind.IdleRight)
                }
            }
        }
    }
})
forever(function () {
    for (let value8 of sprites.allOfKind(SpriteKind.Bumper)) {
        if (value8.isHittingTile(CollisionDirection.Right) || (value8.tileKindAt(TileDirection.Bottom, assets.tile`tile12`) || value8.tileKindAt(TileDirection.Bottom, assets.tile`tile13`))) {
            EnemyLeft_Right = -1
            animation.setAction(value8, ActionKind.EnemyLeft_1)
            value8.vx = -30
        } else if (value8.isHittingTile(CollisionDirection.Left) || (value8.tileKindAt(TileDirection.Bottom, assets.tile`tile15`) || value8.tileKindAt(TileDirection.Bottom, assets.tile`tile21`))) {
            EnemyLeft_Right = 1
            animation.setAction(value8, ActionKind.EnemyRight_2)
            value8.vx = 30
        }
        if (value8.vx < 0 && (value8.x - hero.x <= 50 && !(value8.x - hero.x <= 0) && value8.y == hero.y)) {
            value8.vx = 0
            value8.ax = 0
            animation.setAction(value8, ActionKind.IdleShootLeft)
            for (let index = 0; index < 3; index++) {
                projectileEnemy = sprites.createProjectileFromSprite(img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 2 2 2 2 2 . . . . . . 
                    . . . . 2 1 1 1 1 1 2 . . . . . 
                    . . . . . 2 2 2 2 2 . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `, value8, -180, 0)
                projectileEnemy.x += -10
                projectileEnemy.y += -3
                music.pewPew.play()
                pause(300)
            }
            animation.setAction(value8, ActionKind.ShootCrouchLeft)
            for (let index = 0; index < 3; index++) {
                projectileEnemy = sprites.createProjectileFromSprite(img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 2 2 2 2 2 . . . . . . 
                    . . . . 2 1 1 1 1 1 2 . . . . . 
                    . . . . . 2 2 2 2 2 . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `, value8, -180, 0)
                projectileEnemy.x += -10
                projectileEnemy.y += 0
                music.pewPew.play()
                pause(300)
            }
        } else if (value8.vx > 0 && (hero.x - value8.x <= 50 && !(hero.x - value8.x <= 0) && value8.y == hero.y)) {
            value8.vx = 0
            value8.ax = 0
            animation.setAction(value8, ActionKind.IdleShootRight)
            for (let index = 0; index < 3; index++) {
                projectileEnemy = sprites.createProjectileFromSprite(img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 2 2 2 2 2 . . . . . . 
                    . . . . 2 1 1 1 1 1 2 . . . . . 
                    . . . . . 2 2 2 2 2 . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `, value8, 180, 0)
                projectileEnemy.x += 11
                projectileEnemy.y += -3
                music.pewPew.play()
                pause(300)
            }
            animation.setAction(value8, ActionKind.ShootCrouchRight)
            for (let index = 0; index < 3; index++) {
                projectileEnemy = sprites.createProjectileFromSprite(img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 2 2 2 2 2 . . . . . . 
                    . . . . 2 1 1 1 1 1 2 . . . . . 
                    . . . . . 2 2 2 2 2 . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `, value8, 180, 0)
                projectileEnemy.x += 11
                projectileEnemy.y += 0
                music.pewPew.play()
                pause(300)
            }
        } else if (value8.vx == 0 && !(value8.y == hero.y)) {
            if (EnemyLeft_Right == -1) {
                animation.setAction(value8, ActionKind.EnemyLeft_1)
                value8.vx = -30
            } else if (EnemyLeft_Right == 1) {
                animation.setAction(value8, ActionKind.EnemyRight_2)
                value8.vx = 30
            }
            EnemyCrouch = 0
        }
    }
})
// Water gravity
forever(function () {
    coin.x = hero.x + 55
    coin.y = hero.y - 54
    if (!(hero.tileKindAt(TileDirection.Center, assets.tile`tile32`)) && hero.tileKindAt(TileDirection.Bottom, assets.tile`tile32`) && controller.A.isPressed()) {
        hero.ay = gravity
        hero.vy = -7 * pixelsToMeters
    }
    if (hero.tileKindAt(TileDirection.Center, assets.tile`tile32`) && !(controller.A.isPressed())) {
        hero.ay = 1
        hero.vy = 40
    }
    if (controller.down.isPressed()) {
        controller.moveSprite(hero, 0, 0)
    } else if (hero.tileKindAt(TileDirection.Center, assets.tile`tile32`)) {
        controller.moveSprite(hero, 50, 0)
    } else {
        controller.moveSprite(hero, 90, 0)
    }
    if (!(hero.tileKindAt(TileDirection.Bottom, assets.tile`tile32`)) && (!(hero.tileKindAt(TileDirection.Left, assets.tile`tile32`)) && !(hero.tileKindAt(TileDirection.Right, assets.tile`tile32`)))) {
        hero.ay = gravity
    }
})
